{#{%- from "govuk/components/button/macro.njk" import govukButton -%}#}
{#{%- from "govuk/components/date-input/macro.njk" import govukDateInput -%}#}
{#{%- from "govuk/components/fieldset/macro.njk" import govukFieldset -%}#}
{#{%- from "govuk/components/input/macro.njk" import govukInput -%}#}
{#{%- from "govuk/components/textarea/macro.njk" import govukTextarea -%}#}
{% extends 'form-layout.html' %}

{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% set pageHeading = "Add all parties listed on the legal agreement" %}

{% block formContent %}
    {{ govukBackLink({
        text: "Back",
        href: "/land/check-legal-agreement-file"
    }) }}
    <div class="govuk-body">
        {% if err %}
            {% include "errorbanner.html" %}
        {% endif %}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div data-module="moj-add-another">
                    {{ govukFieldset({
                        legend: {
                            text: pageHeading,
                            classes: "govuk-fieldset__legend--l",
                            isPageHeading: true
                        }
                    }) }}
                        {% call govukFieldset({
                            classes: 'moj-add-another__item',
                            legend: {
                                text: 'Legal party',
                                classes: 'moj-add-another__title govuk-fieldset__legend--m',
                                isPageHeading: false
                            }
                        }) %}
                            {{ govukInput({
                                    id: "organosation[0].organisationName",
                                    name: "organosation[0].organisationName",
                                    label: {
                                        text: 'Full name or organisation'
                                    },
                                    errorMessage: err[0]
                                }
                            )}}
                            {{ govukRadios(
                                {
                                name: "organosation[0].role",
                                id: "organosation[0].role",
                                hint: {
                                    html: "<div class='govuk-hint'>Select one option.</div>"
                                },
                                fieldset: {
                                    legend: {
                                        text: "Role"
                                    }
                                },
                                errorMessage: err[1],
                                items: [
                                    {
                                        value: "County Council",
                                        text: "County Council"
                                    },
                                    {
                                        value: "developer",
                                        text: "Developer"
                                    },
                                    {
                                        value: "landowner",
                                        text: "Landowner"
                                    },
                                    {
                                        value: "Responsible body",
                                        text: "Responsible body"
                                    },
                                    {
                                        value: "other",
                                        text: "Other",
                                        conditional: {
                                        html: '<div id="other-role">
                                                <div class="govuk-form-group">
                                                    <label class="govuk-label" for="other-party">
                                                        Role
                                                    </label>
                                                    <input class="govuk-input govuk-!-width-one-third" id="other-party-text" name="otherPartyName">
                                                </div>
                                            </div>'
                                    }
                                    }
                                ]
                            }) }}
                        {% endcall %}

                        <div class="moj-button-action">
                            {{ govukButton({
                                text: 'Add another person',
                                classes: 'govuk-button--secondary moj-add-another__add-button govuk-!-margin-bottom-4'
                            }) }}
                        </div>

                        <div class="moj-button-action">
                            {{ govukButton({
                                text: 'Submit'
                            }) }}
                        </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
