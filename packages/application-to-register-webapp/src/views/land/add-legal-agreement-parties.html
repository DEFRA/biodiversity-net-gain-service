{#{%- from "govuk/components/button/macro.njk" import govukButton -%}#}
{#{%- from "govuk/components/date-input/macro.njk" import govukDateInput -%}#}
{#{%- from "govuk/components/fieldset/macro.njk" import govukFieldset -%}#}
{#{%- from "govuk/components/input/macro.njk" import govukInput -%}#}
{#{%- from "govuk/components/textarea/macro.njk" import govukTextarea -%}#}
{% extends 'form-layout.html' %}

{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% set pageHeading = "Add all parties listed on the legal agreement" %}

{% block formContent %}
    {{ govukBackLink({
        text: "Back",
        href: "/land/check-legal-agreement-file"
    }) }}
    <div class="govuk-body">
        {% if err %}
            {% include "errorbanner.html" %}
        {% endif %}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div data-module="moj-add-another">

                    {{ govukFieldset({
                        legend: {
                            text: pageHeading,
                            classes: "govuk-fieldset__legend--l",
                            isPageHeading: true
                        }
                    }) }}

                    <form method="post">

                        {% call govukFieldset({
                            classes: 'moj-add-another__item',
                            legend: {
                                text: 'Legal party',
                                classes: 'moj-add-another__title govuk-fieldset__legend--m',
                                isPageHeading: false
                            }
                        }) %}
                            {{ govukInput({
                                id: "organisation[0].organisationName",
                                name: "organisation[0].organisationName",
                                value: name,
                                label: {
                                    text: 'Full name or organisation'
                                },
                                errorMessage: err[0],
                                attributes: {
                                    'data-name': 'organisation[%index%][organisationName]',
                                    'data-id': 'organisation[%index%][organisationName]'
                                }
                            })}}
                            {{ govukRadios(
                                {
                                    id: 'organisation[0].role',
                                    name: "organisation[0].role",
                                    hint: {
                                        html: "<div class='govuk-hint'>Select one option.</div>"
                                    },
                                    label: {
                                        text: 'Organisation role'
                                    },
                                    fieldset: {
                                        legend: {
                                            text: "Role"
                                        }
                                    },
                                    attributes:{
                                        'id': 'organisation[0].role',
                                        'data-name': 'organisation[%index%][role]',
                                        'data-id': 'organisation[%index%][role]'
                                    },
                                    errorMessage: err[1],
                                    items: [
                                    {
                                        value: "County Council",
                                        text: "County Council",
                                        checked: organisationChecked.County_Council
                                    },
                                    {
                                        value: "Developer",
                                        text: "Developer",
                                        checked: organisationChecked.Developer
                                    },
                                    {
                                        value: "Landowner",
                                        text: "Landowner",
                                        checked: organisationChecked.Landowner
                                    },
                                    {
                                        value: "Responsible body",
                                        text: "Responsible body",
                                        checked: organisationChecked.Responsible_body
                                    },
                                    {
                                        value: "Other",
                                        text: "Other",
                                        checked: organisationChecked.Other,
                                        conditional: {
                                        html: '<div id="other-role">
                                                <div class="govuk-form-group">
                                                    <label class="govuk-label" for="other-party">
                                                        Role
                                                    </label>
                                                    <input class="govuk-input govuk-!-width-one-third" id="other-party-text" value="' + otherPartyName  + '" name="otherPartyName">
                                                </div>
                                            </div>'
                                        }
                                    }
                                ]
                                }) }}
                        {% endcall %}

                        <div class="moj-button-action">
                            {{ govukButton({
                                text: 'Add another',
                                classes: 'govuk-button--secondary moj-add-another__add-button govuk-!-margin-bottom-4'
                            }) }}
                        </div>

                        <div class="moj-button-action">
                            {{ govukButton({
                                text: 'Contiue'
                            }) }}
                        </div>

                    </form>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
