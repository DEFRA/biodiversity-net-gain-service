#!/bin/sh

DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET="docker/secrets/DATABASE_VERSION_CONTROL_ENV"
DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET_PATH="../../${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET}"
DATABASE_VERSION_CONTROL_ENV_TEMPLATE="local-database-version-control-env-template"

if [ ! -f ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET_PATH} ] && [ ! -L ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET_PATH} ]; then
  cp ../../docker/azure-services/${DATABASE_VERSION_CONTROL_ENV_TEMPLATE} ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET_PATH}
  echo Created ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET} file
  echo Please populate mandatory secrets before use 
elif [ -L ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET_PATH} ]; then
  echo ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET} symbolic link exists
else
  echo ${DATABASE_VERSION_CONTROL_ENV_DOCKER_SECRET} file exists
fi
