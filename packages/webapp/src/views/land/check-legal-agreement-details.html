{% extends 'form-layout.html' %}

{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% set showSaveLink = true %}
{% set pageHeading = "Check the legal agreement details" %}

{% block formContent %}
    <div class="govuk-body">
        {% if err %}
            {% include "errorbanner.html" %}
        {% endif %}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                {{ govukFieldset({
                    legend: {
                        text: pageHeading,
                        classes: "govuk-fieldset__legend--l",
                        isPageHeading: true
                    }
                }) }}
                <form method="post">
                    {% set rows= [
                        {
                            key: {
                                text: 'Type of legal agreement'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-legal-agreement-type-value' data-testid='legal-agreement-type-value'>" + legalAgreementType + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/legal-agreement-type',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-legal-agreement-type"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            key: {
                                text: legalAgreementType +' file uploaded'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-legal-agreement-file-value' data-testid='legal-agreement-file-name-value'>" + legalAgreementFileNames + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/check-you-added-all-legal-files',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-legal-agreement-file"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            key: {
                                text: 'Responsible body'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-legal-agreement-responsible-bodies-value' data-testid='legal-agreement-responsible-bodies-value'>" + responsibleBodies + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/check-responsible-bodies',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-legal-agreement-responsible-bodies"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            key: {
                                text: 'Local planning authority'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-local-planning-authority-value' data-testid='legal-agreement-responsible-bodies-value'>" + localPlanningAuthorities + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/check-planning-authorities',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-local-planning-authorities"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            key: {
                                text: 'Landowner'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-legal-agreement-landowner-value' data-testid='legal-agreement-landowner-value'>" + landowners + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/check-landowners',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-legal-agreement-landowners"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            key: {
                                text: 'Habitat management and monitoring plan included in legal agreement'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-legal-agreement-habitatplan-type-value' data-testid='legal-agreement-habitatplan-type-value'>" + habitatPlanSeperateDocumentYesNo + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/habitat-plan-legal-agreement',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-legal-agreement-habitatplan-type"
                                        }
                                    }
                                ]
                            }
                        }
                    ] %}
                    
                    {% if habitatPlanSeperateDocumentYesNo == 'No' %}
                        {% set rows = (rows.push({
                            key: {
                                text: 'Habitat management and monitoring plan uploaded'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-habitat-plan-file-value' data-testid='habitat-plan-file-name-value'>" + HabitatPlanFileName + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/check-habitat-plan-file',
                                        text: 'Change',
                                        attributes: {
                                            id: "add-habitat-plan-file"
                                        }
                                    }
                                ]
                            }
                        }), rows) %}
                    {% endif %}
                    
                    {% set rows = (rows.push(
                        {
                            key: {
                                text: 'Habitat enhancement works start date'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-habitat-works-start-date-value' data-testid='habitat-works-start-date-value'>" +  HabitatWorksStartDate + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/enhancement-works-start-date',
                                        text: 'Change',
                                        visuallyHiddenText: 'name',
                                        attributes: {
                                            id: "add-habitat-works-start-date"
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            key: {
                                text: 'Legal agreement end date'
                            },
                            value: {
                                html: "<dd class='govuk-summary-list__value' id='add-habitat-works-end-date-value' data-testid='habitat-works-end-date-value'>" +  HabitatWorksEndDate + "</dd>"
                            },
                            actions: {
                                items: [
                                    {
                                        href: '/land/legal-agreement-end-date',
                                        text: 'Change',
                                        visuallyHiddenText: 'name',
                                        attributes: {
                                            id: "add-habitat-works-end-date"
                                        }
                                    }
                                ]
                            }
                        }
                    ), rows) %}
                    
                    {{ govukSummaryList({
                        rows: rows 
                    }) }}
                    {{ govukButton({
                        text: 'Save and continue',
                        attributes: {
                            id: "accept",
                            "data-testid": "continue"
                        }
                    }) }}
                </form>
            </div>
        </div>
    </div>
{% endblock %}
