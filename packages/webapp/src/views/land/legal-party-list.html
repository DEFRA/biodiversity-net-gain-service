{% extends 'form-layout.html' %}

{% set noOfLegalParites = legalAgreementParties.length %}

{% if noOfLegalParites > 1 %}
    {% set pageHeading = "You have added " + noOfLegalParites + " legal parties" %}
{% else %}
    {% set pageHeading = "You have added " + noOfLegalParites + " legal party" %}
{% endif %}

{% block formContent %}
<div class="govuk-body">
    {% if err %}
        {% include "errorbanner.html" %}
    {% endif %}
    <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds">
            <h1 class="govuk-heading-l" tabindex="-1">
              {{ pageHeading }}
            </h1>

            {% for org in legalAgreementParties %}

                {{ govukSummaryList({
                    rows: [
                                {
                                    key: {
                                        text: org.organisationName + " (" + org.organisationRole + ")",
                                        classes: "govuk-!-font-weight-regular"
                                    },
                                    actions: {
                                        items: [
                                            {
                                                href: routes.ADD_LEGAL_AGREEMENT_PARTIES + "?" + "orgId=" + loop.index0,
                                                text: "Change"
                                            },
                                            {
                                                href: routes.LEGAL_PARTY_REMOVE + "?" + "orgId=" + loop.index0,
                                                text: "Remove"
                                            }
                                        ],
                                        classes: "govuk-summary-list__actions-list"
                                    }
                                }
                            ]
                    }) 
                }}
            {% endfor %}

            {{ govukRadios({
                idPrefix: "addAnotherLegalParty",
                name: "addAnotherLegalParty",
                id: "addAnotherLegalParty",
                fieldset: {
                    legend: {
                        text: "Do you need to add another legal party?",
                        isPageHeading: false,
                        classes: "moj-add-another__title govuk-fieldset__legend--m"
                    }
                },
                hint: {
                    text: "You must tell us about all parties listed on the " + legalAgreementType + ".",
                    classes: "govuk-hint app-text-colour wrap-text"
                },
                errorMessage: err[0],
                items: [
                    {
                        value: "yes",
                        text: "Yes",
                        id: "add-another-party-yes",
                        checked: addAnotherLegalParty === "yes"
                    },
                    {
                        value: "no",
                        text: "No",
                        id: "add-another-party-no",
                        checked: addAnotherLegalParty === "no"
                    }
                ]
            }) }}
            {{ govukButton({
                text: "Save and continue",
                attributes: {
                    id: "continue",
                    "data-testid": "continue"
                }
            }) }}
        </div>
    </div>
</div>
{% endblock %}