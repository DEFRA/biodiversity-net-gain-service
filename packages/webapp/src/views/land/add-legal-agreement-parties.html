{% extends 'form-layout.html' %}

{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% set showSaveLink = true %}
{% set pageHeading = "Add all parties listed on the " + legalAgreementType %}

{% block formContent %}
    <div class="govuk-body">
        {% if err %}
            {% include "errorbanner.html" %}
        {% endif %}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                <div id="moj-add-another-component" data-module="moj-add-another">
                    <h1 class="govuk-heading-l" tabindex="-1">
                        {{ pageHeading }}
                    </h1>
                    <form method="post">
                        {{ govukInput({
                            id: "organisationName",
                            name: "organisationName",
                            value: organisation.organisationName,
                            label: {
                                text: "Full name or organisation"
                            },
                            errorMessage: organisationNameErr
                        }) }}

                        {% set role = organisation.organisationRole %}

                        {{ govukRadios({
                            name: "organisationRole",
                            id: "organisationRole",
                            fieldset: {
                                legend: {
                                    text: "Role",
                                    classes: "govuk-fieldset__legend"
                                }
                            },
                            hint: {
                                html: "<div class='govuk-hint'>Select one option.</div>"
                            },
                            errorMessage: organisationRoleErr,
                            items: [
                                {
                                    id: "localAuthorityRole",
                                    name: "localAuthorityRole",
                                    value: "Local authority",
                                    text: "Local authority",
                                    checked: role === "Local authority",
                                    classes: "govuk-input--width-2"
                                },
                                {
                                    id: "developerRole",
                                    name: "developerRole",
                                    value: "Developer",
                                    text: "Developer",
                                    checked: role === "Developer",
                                    classes: "govuk-input--width-2"
                                },
                                {
                                    id: "landOwnerRole",
                                    name: "landOwnerRole",
                                    value: "Landowner",
                                    text: "Landowner",
                                    checked: role === "Landowner",
                                    classes: "govuk-input--width-2"
                                },
                                {
                                    id: "otherRole",
                                    name: "otherRole",
                                    value: "Other",
                                    text: "Other",
                                    checked: role === "Other",
                                    classes: "govuk-input--width-2",
                                    conditional: {
                                        html: '<div id="other-role">
                                                <div class="govuk-form-group">
                                                    <label class="govuk-label" for="other-party">
                                                        Role
                                                    </label>
                                                    <input class="govuk-input govuk-!-width-one-third" value="' + organisation.organisationOtherRole  + '" name="organisationOtherRole">
                                                </div>
                                            </div>'
                                    }
                                }
                            ]
                        }) }}

                        <div class="moj-button-action">
                            {{ govukButton({
                                text: "Save and continue",
                                attributes: {
                                    id: "continue",
                                    "data-testid": "continue"
                                }
                            }) }}
                        </div>
                    </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block bodyEnd %}
    {{ super() }}
    <script src="{{ assetPath }}/js/addLegalAgreementParties.js"></script>
{% endblock %}
