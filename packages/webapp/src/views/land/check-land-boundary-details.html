{% extends 'form-layout.html' %}

{% from "govuk/components/radios/macro.njk" import govukRadios %}

{% set showSaveLink = true %}
{% set pageHeading = "Check the land boundary details" %}

{% block formContent %}
    <div class="govuk-body">
        {% if err %}
            {% include "errorbanner.html" %}
        {% endif %}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-two-thirds">
                {{ govukFieldset({
                    legend: {
                        text: pageHeading,
                        classes: "govuk-fieldset__legend--l",
                        isPageHeading: true
                    }
                }) }}
                <form method="post">
                    {{ govukSummaryList({
                        rows: [
                          {
                            key: {
                                text: 'Land boundary file type'
                            },
                            value: {
                                html: "<span data-testid=\"land-boundary-file-type-value\">" + landBoundaryUploadType + "</span>"
                            },
                            actions: {
                              items: [
                                  {
                                      href: '/land/choose-land-boundary-upload',
                                      text: 'Change',
                                      visuallyHiddenText: ' land boundary file',
                                      attributes: {
                                          id: "check-land-boundary-file-type"
                                      }
                                  }
                              ]
                            }
                          },
                            {
                              key: {
                                  text: 'Land boundary file uploaded'
                              },
                              value: {
                                  html: "<span data-testid=\"land-boundary-file-value\">" + landBoundaryFileName + "</span>"
                              },
                              actions: {
                                items: [
                                    {
                                        href: checkLandBoundaryLink,
                                        text: 'Change',
                                        visuallyHiddenText: ' land boundary file',
                                        attributes: {
                                            id: "check-land-boundary-file"
                                        }
                                    }
                                ]
                              }
                            },
                            {
                              key: {
                                text: "Land boundary on a map"
                              },
                              classes: hideClass(documentOrImage),
                              value: {
                                html: "<div id=\"map\" class=\"map map--location\" tabindex=\"0\" data-testid=\"land-boundary-map-value\"></div>"
                              }
                            },
                              {
                                key: {
                                    text: 'Grid reference'
                                },
                                value: {
                                    html: "<span data-testid=\"grid-reference-value\">" + gridReference + "</span>"
                                },
                                actions: {
                                    items: [
                                        {
                                            href: '/land/add-grid-reference',
                                            text: 'Change',
                                            visuallyHiddenText: ' grid reference',
                                            classes: hideClass(geospatial),
                                            attributes: {
                                                id: "add-grid-reference"
                                            }
                                        }
                                    ]
                                }
                              },
                            {
                              key: {
                                  text: 'Area in hectares'
                              },
                              value: {
                                  html: "<span data-testid=\"hectares-value\">" + areaInHectare + "</span>"
                              },
                              actions: {
                              items: [
                                  {
                                      href: '/land/add-hectares',
                                      text: 'Change',
                                      visuallyHiddenText: ' area in hectares',
                                      classes: hideClass(geospatial),
                                      attributes: {
                                          id: "add-hectares"
                                      }
                                  }
                              ]
                            }
                          }
                        ]
                    }) }}
                <form method="post">
                    {{ govukButton({
                        text: "Continue",
                        attributes: {
                            id: "continue"
                        }
                    }) }}
                </form>
            </div>
        </div>
    </div>
{% endblock %}
{% block bodyEnd %}
    {{ super() }}
    {% if geospatial %}
    <script src="{{ assetPath }}/js/checkLandBoundaryDetails.js"></script>
    <script>
      const safeMapConfig = {{ mapConfig | dump | safe }}
      checkLandBoundaryDetails.initialiseMap(safeMapConfig)
    </script>
    {% endif %}
{% endblock %}
